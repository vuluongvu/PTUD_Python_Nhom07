{% extends 'core/base.html' %} 
{% load static %} 
{% block title %}MacBook Air M1 2020 - LapStore
{% endblock %} 
{% block content %}
<!-- DJANGO: Breadcrumbs dynamic -->
<div class="breadcrumb">
  <a href="{% url 'core:home' %}">Trang chủ</a> /
  {% comment %} <a href="{% url 'products:view-all' %}">Laptop</a> / {% endcomment %}
  <a href="#">Apple MacBook</a> / MacBook Air M1 2020
</div>

<div class="detail-grid">
  <div class="gallery-box">
    <div class="main-img-wrap">
      <!-- DJANGO: {{ product.image.url }} -->
      <img
        id="mainImage"
        src="https://placehold.co/500x500?text=MacBook+Air+M1"
        alt="MacBook"
      />
    </div>
    <div class="thumb-list">
      <!-- DJANGO: Loop product images -->
      <div
        class="thumb-item active"
        onclick="
          changeImage(this, 'https://placehold.co/500x500?text=MacBook+Air+M1')
        "
      >
        <img src="https://placehold.co/100x100?text=Front" alt="Front" />
      </div>
      <div
        class="thumb-item"
        onclick="
          changeImage(this, 'https://placehold.co/500x500?text=Side+View')
        "
      >
        <img src="https://placehold.co/100x100?text=Side" alt="Side" />
      </div>
      <div
        class="thumb-item"
        onclick="
          changeImage(this, 'https://placehold.co/500x500?text=Keyboard')
        "
      >
        <img src="https://placehold.co/100x100?text=Key" alt="Key" />
      </div>
      <div
        class="thumb-item"
        onclick="changeImage(this, 'https://placehold.co/500x500?text=Back')"
      >
        <img src="https://placehold.co/100x100?text=Back" alt="Back" />
      </div>
    </div>
  </div>

  <div class="prod-info">
    <h1 class="prod-title">
      <!-- DJANGO: {{ product.name }} -->
      MacBook Air 13 inch M1 2020 8GB/256GB Chính hãng
    </h1>

    <div class="prod-meta">
      <!-- DJANGO: {{ product.rating }} -->
      <div class="rating">
        <i class="fa-solid fa-star"></i> 4.9 (120 đánh giá)
      </div>
      <div>Mã: MBA-M1-256</div>
    </div>

    <div class="price-row">
      <!-- DJANGO:  -->
      <span class="current-price">18.490.000đ</span>
      <span class="old-price">22.990.000đ</span>
      <span class="discount-tag">-19%</span>
    </div>

    <!-- DJANGO: Loop Variants (Colors) -->
    <div class="option-group">
      <label class="option-label">Màu sắc</label>
      <div class="option-list">
        <button class="opt-btn active">Xám (Gray)</button>
        <button class="opt-btn">Bạc (Silver)</button>
        <button class="opt-btn">Vàng (Gold)</button>
      </div>
    </div>

    <!-- DJANGO: Loop Variants (Config) -->
    <div class="option-group">
      <label class="option-label">Cấu hình (RAM / SSD)</label>
      <div class="option-list">
        <button class="opt-btn active">8GB / 256GB</button>
        <button class="opt-btn">16GB / 512GB</button>
      </div>
    </div>

    <div class="promo-box">
      <div class="promo-head">
        <i class="fa-solid fa-gift"></i> Ưu đãi Lì Xì Tết
      </div>
      <ul class="promo-list">
        <li>
          <i class="fa-solid fa-check-circle"></i> Giảm thêm 500.000đ cho Học
          sinh - Sinh viên.
        </li>
        <li>
          <i class="fa-solid fa-check-circle"></i> Tặng Túi chống sốc cao cấp
          trị giá 350.000đ.
        </li>
        <li>
          <i class="fa-solid fa-check-circle"></i> Giảm 20% khi mua kèm Chuột
          Magic Mouse.
        </li>
        <li>
          <i class="fa-solid fa-check-circle"></i> Hỗ trợ cài đặt phần mềm miễn
          phí trọn đời.
        </li>
      </ul>
    </div>

    <div class="action-group">
      <!-- DJANGO: Add to cart form/action -->
      <button
        class="btn-main btn-buy"
        onclick="window.location.href = '{% url 'orders:cart' %}'"
      >
        MUA NGAY
        <span>(Giao hàng tận nơi hoặc nhận tại cửa hàng)</span>
      </button>
      <button
        class="btn-main btn-cart"
        onclick="alert('Đã thêm sản phẩm vào giỏ hàng!')"
      >
        <i class="fa-solid fa-cart-plus"></i>
      </button>
    </div>
  </div>
</div>

<div class="content-grid">
  <div class="content-block">
    <h3 class="block-title">Đặc điểm nổi bật</h3>
    <!-- DJANGO: {{ product.description|safe }} -->
    <p style="margin-bottom: 15px; color: #4b5563">
      MacBook Air M1 2020 mang đến một bước nhảy vọt về hiệu năng với con chip
      Apple M1 mạnh mẽ. Thiết kế nhôm nguyên khối sang trọng, mỏng nhẹ chỉ
      1.29kg, thời lượng pin lên đến 18 tiếng giúp bạn thoải mái làm việc cả
      ngày dài.
    </p>
    <img
      src="https://placehold.co/800x400?text=Feature+Image"
      style="border-radius: 12px; margin-top: 10px"
    />
  </div>

  <div class="content-block">
    <h3 class="block-title">Thông số kỹ thuật</h3>
    <!-- DJANGO: Loop specifications -->
    <table class="specs-table">
      <tr>
        <td>CPU</td>
        <td>Apple M1 8-Core</td>
      </tr>
      <tr>
        <td>RAM</td>
        <td>8 GB</td>
      </tr>
      <tr>
        <td>Ổ cứng</td>
        <td>256 GB SSD</td>
      </tr>
      <tr>
        <td>Màn hình</td>
        <td>13.3" Retina (2560 x 1600)</td>
      </tr>
      <tr>
        <td>Card màn hình</td>
        <td>7-core GPU</td>
      </tr>
      <tr>
        <td>Cổng kết nối</td>
        <td>2 x Thunderbolt 3 (USB-C)</td>
      </tr>
      <tr>
        <td>Hệ điều hành</td>
        <td>macOS Big Sur</td>
      </tr>
      <tr>
        <td>Pin</td>
        <td>Lên đến 18 giờ</td>
      </tr>
      <tr>
        <td>Trọng lượng</td>
        <td>1.29 kg</td>
      </tr>
    </table>
  </div>
</div>

<!-- Review Section -->
<div class="content-block review-section" style="margin-bottom: 50px">
  <h3 class="block-title">Đánh giá & Nhận xét</h3>

  <div class="review-dashboard">
    <!-- DJANGO: Average Rating Calculation -->
    <div class="rating-summary">
      <div class="average-score">4.9/5</div>
      <div class="stars-display">
        <i class="fa-solid fa-star"></i>
        <i class="fa-solid fa-star"></i>
        <i class="fa-solid fa-star"></i>
        <i class="fa-solid fa-star"></i>
        <i class="fa-solid fa-star-half-stroke"></i>
      </div>
      <div class="total-reviews">120 đánh giá</div>
    </div>

    <!-- DJANGO: Review Form (POST) -->
    <div class="review-form-box">
      <h4>Viết đánh giá của bạn</h4>
      <div class="form-rating-select">
        <span>Bạn cảm thấy thế nào:</span>
        <div class="star-input">
          <i class="fa-regular fa-star" data-value="1"></i>
          <i class="fa-regular fa-star" data-value="2"></i>
          <i class="fa-regular fa-star" data-value="3"></i>
          <i class="fa-regular fa-star" data-value="4"></i>
          <i class="fa-regular fa-star" data-value="5"></i>
        </div>
      </div>
      <textarea
        class="review-textarea"
        placeholder="Mời bạn chia sẻ cảm nhận về sản phẩm..."
      ></textarea>
      <button
        class="btn-submit-review"
        onclick="alert('Cảm ơn bạn đã đánh giá!')"
      >
        Gửi đánh giá
      </button>
    </div>
  </div>

  <div class="review-list">
    <!-- DJANGO: Loop Reviews -->
    <div class="review-item">
      <div class="reviewer-info">
        <div class="avatar">H</div>
        <div>
          <div class="reviewer-name">Hoàng Văn Nam</div>
          <div class="review-time">2 ngày trước</div>
        </div>
      </div>
      <div class="review-rating">
        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i
        ><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i
        ><i class="fa-solid fa-star"></i>
      </div>
      <p class="review-text">
        Máy đẹp, chạy mượt, pin trâu. Shop tư vấn nhiệt tình, giao hàng siêu
        tốc. Rất hài lòng!
      </p>
    </div>

    <div class="review-item">
      <div class="reviewer-info">
        <div class="avatar" style="background: #fcd34d; color: #000">L</div>
        <div>
          <div class="reviewer-name">Lê Thị Bích</div>
          <div class="review-time">1 tuần trước</div>
        </div>
      </div>
      <div class="review-rating">
        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i
        ><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i
        ><i class="fa-regular fa-star"></i>
      </div>
      <p class="review-text">
        Sản phẩm tốt trong tầm giá. Tuy nhiên hộp hơi móp một chút do vận
        chuyển.
      </p>
    </div>
  </div>
</div>

<!-- Video Section -->
<div class="content-block video-section" style="margin-bottom: 50px">
  <h3 class="block-title">Video đánh giá chi tiết</h3>
  <div class="video-container">
    <iframe
      src="https://www.youtube.com/embed/hs1HoLs4SD0?si=generic"
      title="YouTube video player"
      allow="
        accelerometer;
        autoplay;
        clipboard-write;
        encrypted-media;
        gyroscope;
        picture-in-picture;
        web-share;
      "
      allowfullscreen
    ></iframe>
  </div>
</div>

<div class="mobile-bar">
  <button class="m-btn m-add" onclick="alert('Đã thêm sản phẩm vào giỏ hàng!')">
    <i class="fa-solid fa-cart-plus"></i> Thêm vào giỏ
  </button>
  <button
    class="m-btn m-buy"
    onclick="window.location.href = '{% url 'orders:cart' %}'"
  >
    Mua Ngay
  </button>
</div>
{% endblock %}
