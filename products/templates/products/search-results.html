{% extends 'core/base.html' %} 
{% load static %} {% block title %}
Kết quả tìm kiếm - LapStore
{% endblock %} {% block content %}
<div style="margin-top: -10px; margin-bottom: 20px">
  <p style="font-size: 13px; color: var(--text-sub)">
    <a href="{% url 'core:home' %}">Trang chủ</a>
    <i
      class="fa-solid fa-chevron-right"
      style="font-size: 10px; margin: 0 5px"
    ></i>
    Kết quả tìm kiếm
  </p>
</div>

<!-- Header kết quả -->
<div class="search-header-block">
  <div class="search-title">
    <!-- DJANGO: Hiển thị query tìm kiếm và số lượng kết quả -->
    <h1>Kết quả tìm kiếm cho: "{{ query }}"</h1>
    <span class="search-count"
      >Tìm thấy {{ page_obj.paginator.count }} sản phẩm phù hợp</span
    >
  </div>

  <!-- Bộ lọc nhanh -->
  <div class="filter-bar">
    <button class="filter-btn active">
      <i class="fa-solid fa-arrow-down-wide-short"></i> Liên quan
    </button>
    <button class="filter-btn">
      <i class="fa-solid fa-arrow-up-1-9"></i> Giá thấp - cao
    </button>
    <button class="filter-btn">
      <i class="fa-solid fa-arrow-down-9-1"></i> Giá cao - thấp
    </button>
    <button class="filter-btn">
      <i class="fa-solid fa-percent"></i> Khuyến mãi
    </button>
  </div>
</div>

<!-- Lưới sản phẩm -->
<div class="flash-grid" style="margin-bottom: 40px">
  <!-- DJANGO -->
  
   {% for p in products %}
         <a href="{% url 'products:product-detail' p.slug %}">
            <article class="prod-card pod-card-view-all">
              <button class="btn-add-wishlist" title="Thêm vào yêu thích">
                <i class="fa-regular fa-heart"></i>
              </button>
              <span class="badge-sale">Hot</span>
              <div class="prod-img-wrap">
                <img src="{{p.images.first.image_url}}" alt="LG" />
              </div>
              <h3 class="prod-name">{{p.name}}</h3>
              <div class="prod-specs-box">
                <span
                  ><i class="fa-solid fa-vr-cardboard"></i>VGA: {{p.laptop_config.vga}}
                  </span
                >
                <span><i class="fa-solid fa-microchip"></i>CPU: {{p.laptop_config.cpu}}</span>
              </div>
              <div class="prod-footer">
                <div class="price-box">
                  <span class="price-current">{{p.price_vn}}</span
                  ><span class="price-old">{{p.discount_price_vn}}</span>
                </div>
                <button class="btn-buy-now">Mua ngay</button>
              </div>
            </article>
          </a>
           {% endfor %}
 
  <!-- DJANGO -->
</div>

<!-- Phân trang -->
<div class="pagination">
  {% if page_obj.has_previous %}
  <a
    href="?q={{ query }}&page={{ page_obj.previous_page_number }}"
    class="page-link"
    ><i class="fa-solid fa-chevron-left"></i
  ></a>
  {% endif %} {% for num in page_obj.paginator.page_range %} {% if page_obj.number == num %}
  <a href="#" class="page-link active">{{ num }}</a>
  {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
  <a href="?q={{ query }}&page={{ num }}" class="page-link">{{ num }}</a>
  {% endif %} {% endfor %} {% if page_obj.has_next %}
  <a
    href="?q={{ query }}&page={{ page_obj.next_page_number }}"
    class="page-link"
    ><i class="fa-solid fa-chevron-right"></i
  ></a>
  {% endif %}
</div>
{% endblock %}
